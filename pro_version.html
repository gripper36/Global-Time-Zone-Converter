<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Time Zone Converter Pro</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-bg: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-bg: rgba(255, 255, 255, 0.95);
            --text-color: #333;
            --accent-color: #667eea;
            --clock-bg: rgba(255, 255, 255, 0.9);
            --hour-hand: #2c3e50;
            --minute-hand: #3498db;
            --second-hand: #e74c3c;
            --border-radius: 20px;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--primary-bg);
            min-height: 100vh;
            padding: 20px;
            color: var(--text-color);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
            position: relative;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 300;
            margin-bottom: 10px;
        }

        .main-controls {
            background: var(--secondary-bg);
            border-radius: var(--border-radius);
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
        }

        .mode-selector {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .mode-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            background: rgba(102, 126, 234, 0.1);
            color: var(--accent-color);
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .mode-btn.active {
            background: var(--accent-color);
            color: white;
            transform: translateY(-2px);
        }

        .clocks-container {
            display: grid;
            gap: 30px;
            margin-bottom: 30px;
        }

        .dual-mode {
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        }

        .triple-mode {
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        }

        .clock-card {
            background: var(--clock-bg);
            border-radius: var(--border-radius);
            padding: 25px;
            text-align: center;
            box-shadow: var(--shadow);
            transition: transform 0.3s ease;
            display: flex;
            flex-direction: column;
        }
        
        .clock-card-content {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .clock-card:hover {
            transform: translateY(-5px);
        }

        .city-search-wrapper {
            position: relative;
        }

        .city-search {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            margin-bottom: 20px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .city-search:focus {
            outline: none;
            border-color: var(--accent-color);
        }

        .search-suggestions {
            position: absolute;
            top: 50px;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            max-height: 300px;
            overflow-y: auto;
            z-index: 100;
            display: none;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .suggestion-item {
            padding: 12px;
            cursor: pointer;
            transition: background-color 0.2s ease;
            text-align: left;
        }

        .suggestion-item:hover {
            background-color: #f5f5f5;
        }
        
        .analog-clock-container {
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .analog-clock {
            width: 200px;
            height: 200px;
            margin: 20px auto;
            position: relative;
            border-radius: 50%;
            background: white;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.1);
        }

        .clock-face {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: relative;
        }

        .clock-hand {
            position: absolute;
            transform-origin: bottom center;
            transition: transform 0.5s cubic-bezier(0.4, 0.0, 0.2, 1);
        }

        .hour-hand {
            width: 4px;
            height: 60px;
            background: var(--hour-hand);
            top: 40px;
            left: 50%;
            margin-left: -2px;
            border-radius: 2px;
        }

        .minute-hand {
            width: 3px;
            height: 80px;
            background: var(--minute-hand);
            top: 20px;
            left: 50%;
            margin-left: -1.5px;
            border-radius: 1.5px;
        }

        .second-hand {
            width: 1px;
            height: 90px;
            background: var(--second-hand);
            top: 10px;
            left: 50%;
            margin-left: -0.5px;
        }

        .clock-center {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 12px;
            height: 12px;
            background: var(--second-hand);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
        }
        
        .number {
            position: absolute;
            font-size: 1.1rem;
            font-weight: 500;
            color: var(--hour-hand);
            transform: translate(-50%, -50%);
        }

        .time-display {
            font-size: 2rem;
            font-weight: bold;
            color: var(--accent-color);
            margin-top: 15px;
        }

        .date-display {
            font-size: 1rem;
            color: #666;
            margin-top: 10px;
        }

        .business-hours {
            margin-top: 15px;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }

        .business-open {
            background: rgba(46, 204, 113, 0.2);
            color: #27ae60;
        }

        .business-closed {
            background: rgba(231, 76, 60, 0.2);
            color: #c0392b;
        }

        .time-slider-container {
            background: var(--secondary-bg);
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
        }

        .time-slider {
            width: 100%;
            margin: 20px 0;
            -webkit-appearance: none;
            height: 8px;
            border-radius: 4px;
            background: #e0e0e0;
            outline: none;
        }

        .time-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--accent-color);
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }
        
        .btn-group {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            justify-content: center;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: var(--accent-color);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            .header h1 {
                font-size: 2rem;
            }
            .analog-clock {
                width: 150px;
                height: 150px;
            }
            .hour-hand { width: 3px; height: 45px; top: 30px; margin-left: -1.5px; }
            .minute-hand { width: 2px; height: 60px; top: 15px; margin-left: -1px; }
            .second-hand { width: 1px; height: 65px; top: 10px; margin-left: -0.5px; }

            .mode-selector {
                flex-direction: column;
                align-items: stretch;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Global Time Zone Converter Pro</h1>
        </div>

        <div class="main-controls">
            <div class="mode-selector">
                <button class="mode-btn active" onclick="setMode('dual', event)">Dual Cities</button>
                <button class="mode-btn" onclick="setMode('triple', event)">Triple Cities</button>
            </div>
        </div>

        <div class="clocks-container dual-mode" id="clocksContainer">
            <!-- Clock cards will be generated by JavaScript -->
        </div>

        <div class="time-slider-container">
            <h3>Time Explorer</h3>
            <p>Drag the slider to explore different times of day</p>
            <input type="range" class="time-slider" min="0" max="1439" value="720" oninput="updateTimeFromSlider(this.value)">
            <div class="btn-group">
                <button class="btn btn-primary" onclick="setToCurrentTime()">Reset to Current Time</button>
            </div>
        </div>
    </div>

    <script>
        // --- DATABASE ---
        const cityDatabase = [
            { city: "London", country: "UK", code: "LHR", timezone: "Europe/London" },
            { city: "Manchester", country: "UK", code: "MAN", timezone: "Europe/London" },
            { city: "Paris", country: "France", code: "CDG", timezone: "Europe/Paris" },
            { city: "Amsterdam", country: "Netherlands", code: "AMS", timezone: "Europe/Amsterdam" },
            { city: "Berlin", country: "Germany", code: "BER", timezone: "Europe/Berlin" },
            { city: "Frankfurt", country: "Germany", code: "FRA", timezone: "Europe/Berlin" },
            { city: "Munich", country: "Germany", code: "MUC", timezone: "Europe/Berlin" },
            { city: "Rome", country: "Italy", code: "FCO", timezone: "Europe/Rome" },
            { city: "Madrid", country: "Spain", code: "MAD", timezone: "Europe/Madrid" },
            { city: "Barcelona", country: "Spain", code: "BCN", timezone: "Europe/Madrid" },
            { city: "Zurich", country: "Switzerland", code: "ZRH", timezone: "Europe/Zurich" },
            { city: "Istanbul", country: "Turkey", code: "IST", timezone: "Europe/Istanbul" },
            { city: "Moscow", country: "Russia", code: "SVO", timezone: "Europe/Moscow" },
            { city: "Dubai", country: "UAE", code: "DXB", timezone: "Asia/Dubai" },
            { city: "Doha", country: "Qatar", code: "DOH", timezone: "Asia/Qatar" },
            { city: "New York", country: "USA", code: "JFK", timezone: "America/New_York" },
            { city: "Newark", country: "USA", code: "EWR", timezone: "America/New_York" },
            { city: "Los Angeles", country: "USA", code: "LAX", timezone: "America/Los_Angeles" },
            { city: "San Francisco", country: "USA", code: "SFO", timezone: "America/Los_Angeles" },
            { city: "Chicago", country: "USA", code: "ORD", timezone: "America/Chicago" },
            { city: "Atlanta", country: "USA", code: "ATL", timezone: "America/New_York" },
            { city: "Dallas", country: "USA", code: "DFW", timezone: "America/Chicago" },
            { city: "Miami", country: "USA", code: "MIA", timezone: "America/New_York" },
            { city: "Boston", country: "USA", code: "BOS", timezone: "America/New_York" },
            { city: "Washington D.C.", country: "USA", code: "IAD", timezone: "America/New_York" },
            { city: "Seattle", country: "USA", code: "SEA", timezone: "America/Los_Angeles" },
            { city: "Las Vegas", country: "USA", code: "LAS", timezone: "America/Los_Angeles" },
            { city: "Denver", country: "USA", code: "DEN", timezone: "America/Denver" },
            { city: "Toronto", country: "Canada", code: "YYZ", timezone: "America/Toronto" },
            { city: "Vancouver", country: "Canada", code: "YVR", timezone: "America/Vancouver" },
            { city: "Mexico City", country: "Mexico", code: "MEX", timezone: "America/Mexico_City" },
            { city: "SÃ£o Paulo", country: "Brazil", code: "GRU", timezone: "America/Sao_Paulo" },
            { city: "Buenos Aires", country: "Argentina", code: "EZE", timezone: "America/Argentina/Buenos_Aires" },
            { city: "Tokyo", country: "Japan", code: "HND", timezone: "Asia/Tokyo" },
            { city: "Shanghai", country: "China", code: "PVG", timezone: "Asia/Shanghai" },
            { city: "Beijing", country: "China", code: "PEK", timezone: "Asia/Shanghai" },
            { city: "Hong Kong", country: "China", code: "HKG", timezone: "Asia/Hong_Kong" },
            { city: "Singapore", country: "Singapore", code: "SIN", timezone: "Asia/Singapore" },
            { city: "Seoul", country: "South Korea", code: "ICN", timezone: "Asia/Seoul" },
            { city: "Bangkok", country: "Thailand", code: "BKK", timezone: "Asia/Bangkok" },
            { city: "Mumbai", country: "India", code: "BOM", timezone: "Asia/Kolkata" },
            { city: "Delhi", country: "India", code: "DEL", timezone: "Asia/Kolkata" },
            { city: "Sydney", country: "Australia", code: "SYD", timezone: "Australia/Sydney" },
            { city: "Melbourne", country: "Australia", code: "MEL", timezone: "Australia/Melbourne" },
            { city: "Auckland", country: "New Zealand", code: "AKL", timezone: "Pacific/Auckland" },
            { city: "Johannesburg", country: "South Africa", code: "JNB", timezone: "Africa/Johannesburg" },
            { city: "Cairo", country: "Egypt", code: "CAI", timezone: "Africa/Cairo" }
        ];

        // --- GLOBAL VARIABLES ---
        let currentMode = 'dual';
        let selectedCities = [null, null, null];
        let isLiveTime = true;
        let customTime = null;
        let clockUpdateInterval = null;

        // --- INITIALIZATION ---
        function init() {
            cityDatabase.sort((a, b) => a.city.localeCompare(b.city));
            createClockCards(2);
            selectCity('London', 'Europe/London', 0);
            selectCity('New York', 'America/New_York', 1);
            startClock();
            setToCurrentTime();
            console.log("âœ… App initialized with built-in city database.");
        }

        function createClockCards(count) {
            const container = document.getElementById('clocksContainer');
            container.innerHTML = '';
            for (let i = 0; i < count; i++) {
                const clockCard = document.createElement('div');
                clockCard.className = 'clock-card';
                clockCard.setAttribute('data-city-index', i);
                clockCard.innerHTML = `
                    <div class="city-search-wrapper">
                        <input type="text" class="city-search" placeholder="Type a city or airport code..." oninput="searchCity(this, ${i})">
                        <div class="search-suggestions"></div>
                    </div>
                    <div class="clock-card-content">
                        <div class="analog-clock-container">
                             <div class="analog-clock">
                                <div class="clock-face">
                                    <div class="clock-hand hour-hand"></div>
                                    <div class="clock-hand minute-hand"></div>
                                    <div class="clock-hand second-hand"></div>
                                    <div class="clock-center"></div>
                                </div>
                            </div>
                        </div>
                        <div>
                            <div class="time-display">--:--:--</div>
                            <div class="date-display">Select a city</div>
                            <div class="business-hours business-closed">...</div>
                        </div>
                    </div>
                `;
                createClockNumbers(clockCard);
                container.appendChild(clockCard);
            }
        }

        // --- MODE MANAGEMENT ---
        function setMode(mode, event) {
            currentMode = mode;
            document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            const container = document.getElementById('clocksContainer');
            container.className = `clocks-container ${mode}-mode`;
            
            const cityCount = (mode === 'triple') ? 3 : 2;
            createClockCards(cityCount);

            const oldCity1 = selectedCities[0];
            const oldCity2 = selectedCities[1];
            selectedCities = [null, null, null];
            if (oldCity1) selectCity(oldCity1.name, oldCity1.timezone, 0);
            if (oldCity2) selectCity(oldCity2.name, oldCity2.timezone, 1);
            if (mode === 'triple') {
                selectCity('Tokyo', 'Asia/Tokyo', 2);
            }
            
            updateAllClocks();
        }

        // --- CITY SEARCH AND SELECTION ---
        function searchCity(input, cityIndex) {
            const query = input.value.toLowerCase();
            const suggestions = input.nextElementSibling;

            if (query.length < 2) {
                suggestions.style.display = 'none';
                return;
            }

            const matches = cityDatabase.filter(entry => 
                entry.city.toLowerCase().includes(query) ||
                entry.code.toLowerCase().includes(query) ||
                entry.country.toLowerCase().includes(query)
            ).slice(0, 10);

            if (matches.length > 0) {
                suggestions.innerHTML = matches.map(city => 
                    `<div class="suggestion-item" onclick="selectCity('${city.city}', '${city.timezone}', ${cityIndex})">
                        <strong>${city.city}, ${city.country}</strong> (${city.code})
                    </div>`
                ).join('');
                suggestions.style.display = 'block';
            } else {
                suggestions.innerHTML = '<div class="suggestion-item" style="color: #999;">No cities found.</div>';
                suggestions.style.display = 'block';
            }
        }

        function selectCity(name, timezone, cityIndex) {
            selectedCities[cityIndex] = { name, timezone };
            
            const clockCard = document.querySelector(`[data-city-index="${cityIndex}"]`);
            if (clockCard) {
                const input = clockCard.querySelector('.city-search');
                const suggestions = clockCard.querySelector('.search-suggestions');
                input.value = name;
                suggestions.style.display = 'none';
                input.blur();
            }
            
            updateAllClocks();
        }
        
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.city-search-wrapper')) {
                document.querySelectorAll('.search-suggestions').forEach(s => s.style.display = 'none');
            }
        });

        // --- CLOCK LOGIC ---
        function createClockNumbers(clockCard) {
            const clockFace = clockCard.querySelector('.clock-face');
            if (!clockFace) return;

            const radius = 85; // Distance of numbers from center
            for (let i = 1; i <= 12; i++) {
                const number = document.createElement('div');
                number.className = 'number';
                number.textContent = i;
                
                const angle = (i - 3) * 30 * (Math.PI / 180); // Angle in radians, adjusted to start at 3 o'clock
                const x = 100 + radius * Math.cos(angle); // 100 is half of the clock width
                const y = 100 + radius * Math.sin(angle);
                
                number.style.left = `${x}px`;
                number.style.top = `${y}px`;
                
                clockFace.appendChild(number);
            }
        }

        function startClock() {
            if (clockUpdateInterval) {
                clearInterval(clockUpdateInterval);
            }
            clockUpdateInterval = setInterval(() => {
                if (isLiveTime) {
                    updateAllClocks();
                }
            }, 1000);
        }

        function updateAllClocks() {
            const baseTime = isLiveTime ? new Date() : customTime;
            selectedCities.forEach((city, index) => {
                if (city) {
                    updateClock(index, city, baseTime);
                }
            });
        }

        function updateClock(index, city, baseTime) {
            const clockCard = document.querySelector(`[data-city-index="${index}"]`);
            if (!clockCard) return;

            try {
                const cityTime = new Date(baseTime.toLocaleString("en-US", { timeZone: city.timezone }));
                
                clockCard.querySelector('.time-display').textContent = cityTime.toLocaleTimeString('en-GB');
                clockCard.querySelector('.date-display').textContent = cityTime.toLocaleDateString('en-US', {
                    weekday: 'long', month: 'long', day: 'numeric'
                });

                const hour = cityTime.getHours();
                const businessHoursEl = clockCard.querySelector('.business-hours');
                if (hour >= 9 && hour < 17) {
                    businessHoursEl.textContent = 'ðŸ¢ Business Hours';
                    businessHoursEl.className = 'business-hours business-open';
                } else {
                    businessHoursEl.textContent = 'ðŸ  Outside Business Hours';
                    businessHoursEl.className = 'business-hours business-closed';
                }

                const hours = cityTime.getHours();
                const minutes = cityTime.getMinutes();
                const seconds = cityTime.getSeconds();
                
                const hourAngle = (hours % 12) * 30 + minutes * 0.5;
                const minuteAngle = minutes * 6;
                const secondAngle = seconds * 6;
                
                clockCard.querySelector('.hour-hand').style.transform = `rotate(${hourAngle}deg)`;
                clockCard.querySelector('.minute-hand').style.transform = `rotate(${minuteAngle}deg)`;
                clockCard.querySelector('.second-hand').style.transform = `rotate(${secondAngle}deg)`;
            } catch(e) {
                console.error("Error updating clock for timezone:", city.timezone, e);
                clockCard.querySelector('.time-display').textContent = 'Error';
            }
        }

        // --- TIME SLIDER ---
        function updateTimeFromSlider(minutesPastMidnight) {
            isLiveTime = false;
            clearInterval(clockUpdateInterval);
            
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            customTime = new Date(today.getTime() + minutesPastMidnight * 60 * 1000);
            
            updateAllClocks();
        }

        function setToCurrentTime() {
            isLiveTime = true;
            const now = new Date();
            const slider = document.querySelector('.time-slider');
            if (slider) {
                slider.value = now.getHours() * 60 + now.getMinutes();
            }
            startClock();
            updateAllClocks();
        }

        // --- RUN ON PAGE LOAD ---
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
